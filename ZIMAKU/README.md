# 音声・動画からAviutilの編集で使える字幕を生成するシステム
自分の動画を編集するとき、字幕を手作業で入力していく手間を省けます。

# デモ動画
https://youtu.be/VFyMmJAuYok


## 目次
- [どんなシステムか](#どんなシステムか)

- [使用ライブラリ](#使用ライブラリ)

- [なぜ作ろうと思ったのか](#なぜ作ろうと思ったのか)
- [課題・必要なこと](#課題・必要なこと)
- [参考資料](#参考資料)



# どんなシステムか
- wav あるいは mp4 ファイルを選択すると、そのファイルの音声を翻訳し、テキストファイルへと記述していきます。

- 翻訳文に問題がなければ、そのテキストファイルをAviUtilの拡張編集で扱える.exoファイルへと変換できます。

- もし問題があるなら、読み上げに使った原稿テキストを用意し、それと比較することで自動で入れ替え作業を行います。

- 仮想環境でライブラリをインストールした後、コンソールから、[ python -m ZIMAKU ]でシステムを実行できます。


# 使用ライブラリ 
1. Python 3.9
2. ffmpeg-python==0.2.0
3. future==0.18.2
4. mecab-python3==1.0.5
5. numpy==1.22.3
6. playsound==1.2.2
7. pydub==0.25.1
8. SpeechRecognition==3.8.1
9. unidic-lite==1.0.8


# なぜ作ろうと思ったのか
- 動画編集をやっていた際、音声に字幕を付ける作業が大変でした。
 
- なので独自に字幕を導入することができれば、編集の作業が楽になるのではないかと考え、制作を決めました。

- 調べてみると、WEBアプリで動画に字幕を付けれるサービスが存在してはいました。
 
- ただそのアプリだと動画に直接書き込みを行うため、字幕に色を付けたかったり、
 フォントを変更したりといった、後から字幕を変更する作業ができないので、少々使い勝手がよくありませんでした。
 
- そこで、無料動画編集ソフト、『Aviutl』に対応した、編集可能な字幕を作成するアプリの作成を決めました。


# 課題・必要なこと

1. はじめにうまく音声分割の設定をしなくてはならないので、そこも自動で行えるようにする。

2. 読み上げ原稿がない状態でも、アプリ上で書き換えができるようにする。

3. 音声の分割の間隔を、UIでも変更できるようにする。

4. UIで細かい設定変更なども、可能にする？
   - フォントの変更
   - FPSの変更
   - フェードイン、フェードアウトの時間指定などなど

5. 音声分割中、実行中なのか、ターミナルのログを見ないとわからないので、アプリ上でもわかりやすくする。



# 参考資料
参考にしたWebページなどです。

- 【Python/pydub】mp3、wavファイルの分割（無音部分で区切る）  
https://algorithm.joho.info/programming/python/pydub-split-on-silence/

- Pythonで音声からテキストへ変換【SpeechRecognition】  
https://self-development.info/python%E3%81%A7%E9%9F%B3%E5%A3%B0%E3%81%8B%E3%82%89%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%B8%E5%A4%89%E6%8F%9B%E3%80%90speechrecognition%E3%80%91/

- どん底から這い上がるまでの記録  Bag of Wordsについて書いてみる  
https://www.pytry3g.com/entry/2018/03/21/181514

- 【Python/tkinter】ウィジェットの配置(pack)   
https://imagingsolution.net/program/python/tkinter/widget_layout_pack/

- ［文章生成］MeCabをインストールして分かち書きを試してみよう  
https://atmarkit.itmedia.co.jp/ait/articles/2102/05/news027.html


